<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>InvalidKiller</title>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
  <style>
    :root{--bg:#0b0b0b;--card:#0f0f0f;--fg:#e9e9ea;--muted:#9aa0a6;--accent:#bdbdbd}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:linear-gradient(180deg,#0b0b0b 0%, #070707 100%);color:var(--fg)}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:36px}
    .card{max-width:920px;width:100%;padding:40px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));box-shadow:0 12px 40px rgba(0,0,0,0.7);text-align:center}
    .enter{font-size:13px;letter-spacing:2px;color:var(--muted);margin-bottom:8px}
    h1{font-size:56px;margin:6px 0 12px}
    p.lead{color:var(--muted);margin-top:0}
    .icons{display:flex;gap:18px;justify-content:center;margin:28px 0}
    .icon{width:84px;height:84px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.02));display:flex;flex-direction:column;align-items:center;justify-content:center;text-decoration:none;color:var(--fg);border:1px solid rgba(255,255,255,0.02);transition:transform .22s ease}
    .icon:hover{transform:translateY(-6px)}
    .icon small{display:block;margin-top:8px;font-size:12px;color:var(--muted)}

    /* Discord widget (bottom-right) */
    .discord-widget{position:fixed;right:24px;bottom:24px;width:320px;max-width:calc(100% - 48px);background:linear-gradient(180deg,rgba(255,255,255,0.015),rgba(255,255,255,0.01));border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);backdrop-filter: blur(6px);box-shadow:0 12px 40px rgba(0,0,0,0.6)}
    .dw-head{display:flex;align-items:center;gap:12px}
    .avatar{width:64px;height:64px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center;overflow:hidden}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{flex:1;text-align:left}
    .meta .name{font-weight:600}
    .meta .discr{color:var(--muted);font-size:13px}
    .status{margin-top:8px;font-size:13px;color:var(--muted)}
    .dw-actions{display:flex;gap:8px;margin-top:10px}
    .btn{padding:8px 12px;border-radius:10px;border:none;background:transparent;color:var(--fg);cursor:pointer;font-weight:600;border:1px solid rgba(255,255,255,0.03)}

    @media (max-width:520px){h1{font-size:36px}.icon{width:64px;height:64px}.discord-widget{right:12px;left:12px;bottom:12px;width:auto}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="enter">click to enter...</div>
      <h1>InvalidKiller</h1>
      <p class="lead">Minimal grayscale profile page with a live Discord profile widget.</p>

      <div class="icons" role="list">
        <a class="icon" href="#" title="admin">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M12 2L15 8l6 .5-4.5 3 1.5 6L12 15l-6 3 1.5-6L3 8.5 9 8 12 2z" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <small>admin</small>
        </a>

        <a class="icon" href="#" title="diamond">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M2 12l10 9 10-9-10-9-10 9z" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <small>diamond</small>
        </a>

        <a class="icon" href="#" title="code">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M16 18l6-6-6-6M8 6L2 12l6 6" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <small>code</small>
        </a>
      </div>

      <p class="lead">Find me on <a href="https://instagram.com" target="_blank" rel="noopener" style="color:var(--accent);text-decoration:none">Instagram</a> and <a href="#discord-link" id="discordLink" style="color:var(--accent);text-decoration:none">Discord</a>.</p>
    </div>
  </div>

  <!-- Discord widget (floating) -->
  <div class="discord-widget" id="discordWidget" aria-live="polite">
    <div class="dw-head">
      <div class="avatar" id="dwAvatar">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" style="opacity:0.12"><path d="M12 2L15 8l6 .5-4.5 3 1.5 6L12 15l-6 3 1.5-6L3 8.5 9 8 12 2z" stroke="currentColor" stroke-width="0.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
      <div class="meta">
        <div class="name" id="dwName">Loading...</div>
        <div class="discr" id="dwDiscr">ID: 1228657207034380343</div>
        <div class="status" id="dwStatus">ID info only</div>
      </div>
    </div>
    <div class="dw-actions">
      <button class="btn" id="openDiscord">Open Discord</button>
      <button class="btn" id="refreshBtn">Refresh</button>
    </div>
    <div style="margin-top:10px;font-size:13px;color:var(--muted)" id="dwNote">To display avatar &amp; username, set a Vercel Environment Variable <code>DISCORD_BOT_TOKEN</code> (a bot token with no privileged intents is enough for user endpoint access). If you don't provide a token, this widget will show a placeholder.</div>
  </div>

  <script>
    // Embedded user ID (your ID)
    const DISCORD_USER_ID = '1228657207034380343';

    const dwName = document.getElementById('dwName');
    const dwDiscr = document.getElementById('dwDiscr');
    const dwAvatar = document.getElementById('dwAvatar');
    const dwStatus = document.getElementById('dwStatus');
    const openBtn = document.getElementById('openDiscord');
    const refreshBtn = document.getElementById('refreshBtn');

    async function fetchDiscord() {
      dwName.textContent = 'Loading...';
      dwStatus.textContent = 'ID info only';
      try {
        const res = await fetch(`/api/discord?user_id=${DISCORD_USER_ID}`);
        if (!res.ok) throw new Error('network');
        const data = await res.json();
        if (data.error) {
          dwName.textContent = 'Unavailable';
          dwDiscr.textContent = `ID: ${DISCORD_USER_ID}`;
          dwNote(data.error);
          return;
        }
        const username = data.username + (data.discriminator ? ('#' + data.discriminator) : '');
        dwName.textContent = username;
        dwDiscr.textContent = `ID: ${DISCORD_USER_ID}`;
        dwStatus.textContent = data.presence ? `Status: ${data.presence}` : 'Status: not available';

        // avatar
        const avatarUrl = data.avatar_url;
        if (avatarUrl) {
          dwAvatar.innerHTML = '';
          const img = document.createElement('img');
          img.src = avatarUrl;
          img.alt = username + ' avatar';
          img.onload = () => {};
          dwAvatar.appendChild(img);
        }
      } catch (e) {
        dwName.textContent = 'Error';
        dwDiscr.textContent = `ID: ${DISCORD_USER_ID}`;
      }
    }

    function dwNote(msg) {
      const el = document.getElementById('dwNote');
      el.textContent = msg || el.textContent;
    }

    openBtn.addEventListener('click', () => {
      // opens Discord profile â€” this will open the user in official client URI
      // Fallback to Discord profile link
      const url = `https://discord.com/users/${DISCORD_USER_ID}`;
      window.open(url, '_blank', 'noopener');
    });

    refreshBtn.addEventListener('click', fetchDiscord);

    // initial load
    fetchDiscord();
  </script>
</body>
  </html>
